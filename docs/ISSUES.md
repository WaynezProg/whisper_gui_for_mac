# 已知問題與技術債務

## 安全性問題

### ISSUE-001: API Key 硬編碼
**嚴重程度**: 🔴 高
**檔案**: `ai_translate.py:7`
**描述**: OpenAI API key 直接寫在程式碼中
**影響**: 
- 若提交到公開 Git 倉庫會洩露憑證
- 無法在不同環境使用不同 API key
**狀態**: 待修復

### ISSUE-002: 硬編碼路徑
**嚴重程度**: 🔴 高
**檔案**: `actions.py:57-58`
**描述**: `whisper.cpp` 和模型路徑硬編碼
**影響**:
- 無法跨機器使用
- 維護困難，需要修改程式碼才能改變路徑
**狀態**: 待修復

---

## 程式碼品質問題

### ISSUE-003: 缺少配置管理
**嚴重程度**: 🟡 中
**描述**: 配置散落各處，無統一管理
**影響**: 難以維護和部署
**狀態**: 待改善

### ISSUE-004: 錯誤處理不足
**嚴重程度**: 🟡 中
**檔案**: `actions.py`, `gui.py`
**描述**: 
- 未檢查必要工具是否存在（ffmpeg, whisper.cpp）
- 錯誤訊息不夠友善
**影響**: 使用者遇到問題時難以診斷
**狀態**: 待改善

### ISSUE-005: 未使用的程式碼
**嚴重程度**: 🟢 低
**檔案**: `actions.py:26, 40, 39`
**描述**: 
- `total_duration` 計算但未使用
- `translate_to` 參數接收但未使用
**影響**: 程式碼混淆，維護困難
**狀態**: 待清理

---

## 功能問題

### ISSUE-006: 暫停機制不完整
**嚴重程度**: 🟡 中
**檔案**: `gui.py:134-137`
**描述**: 
- `pause_flag` 使用後未重置
- 暫停後無法恢復
**影響**: 使用者體驗不佳
**狀態**: 待改善

### ISSUE-007: 進度顯示不精確
**嚴重程度**: 🟢 低
**檔案**: `actions.py`, `gui.py`
**描述**: 進度條僅依檔案數量計算，未考慮檔案大小
**影響**: 進度顯示不準確
**狀態**: 待改善

### ISSUE-008: 檔案格式支援有限
**嚴重程度**: 🟢 低
**檔案**: `gui.py:14`
**描述**: 僅支援 `.wav` 和 `.mp4`
**影響**: 使用者需要手動轉換其他格式
**狀態**: 待擴充

---

## 依賴問題

### ISSUE-009: 依賴版本不一致
**嚴重程度**: 🟢 低
**檔案**: `requirements.txt:51`, `setup.py`
**描述**: 
- `pykakasi` 沒有版本號
- `setup.py` 未包含 `pykakasi`
**影響**: 可能導致安裝問題
**狀態**: 待修復

---

## 文檔問題

### ISSUE-010: README 內容重複
**嚴重程度**: 🟢 低
**檔案**: `README.md:58-62`
**描述**: 與前面章節重複
**影響**: 文檔混淆
**狀態**: 待修復

### ISSUE-011: 安裝說明不完整
**嚴重程度**: 🟡 中
**檔案**: `README.md`
**描述**: 未說明如何安裝 `ffmpeg` 和 `whisper.cpp`
**影響**: 新使用者難以開始使用
**狀態**: 待補充

### ISSUE-012: 缺少配置說明
**嚴重程度**: 🟡 中
**檔案**: `README.md`
**描述**: 未說明如何設定 API key 與路徑
**影響**: 使用者不知道如何配置
**狀態**: 待補充

---

## 其他問題

### ISSUE-013: 日文轉換判斷可能不準確
**嚴重程度**: 🟢 低
**檔案**: `gui.py:152-153`
**描述**: `is_kanji()` 的 Unicode 範圍判斷可能不完整
**影響**: 可能無法正確識別所有漢字
**狀態**: 待驗證與改善

### ISSUE-014: 輸出檔名可能衝突
**嚴重程度**: 🟢 低
**檔案**: `ai_translate.py:54`
**描述**: 翻譯輸出檔名固定，可能覆蓋舊檔案
**影響**: 可能遺失之前的翻譯結果
**狀態**: 待改善

### ISSUE-015: 缺少日誌系統
**嚴重程度**: 🟢 低
**描述**: 僅使用 `print()` 輸出
**影響**: 難以追蹤問題和除錯
**狀態**: ✅ 已改善（已實作 logger.py）

### ISSUE-017: 拖放功能限制
**嚴重程度**: 🟢 低
**描述**: CustomTkinter 與 `tkinterdnd2` 無法完美整合
**原因**:
- `tkinterdnd2` 需要 `TkinterDnD.Tk()` 作為 root 視窗
- CustomTkinter 使用 `ctk.CTk()`，無法直接整合
**影響**: 無法使用拖放功能，需要使用「添加」按鈕
**狀態**: 已知限制，已提供替代方案
**解決方案**: 使用「添加」按鈕選擇檔案（功能完整）

### ISSUE-016: 缺少測試
**嚴重程度**: 🟡 中
**描述**: 沒有單元測試或整合測試
**影響**: 重構風險高，難以確保功能正常
**狀態**: 待建立

---

## 問題追蹤

| Issue ID | 嚴重程度 | 狀態 | 優先級 | 預計工時 |
|----------|---------|------|--------|---------|
| ISSUE-001 | 🔴 高 | 待修復 | P0 | 0.5h |
| ISSUE-002 | 🔴 高 | 待修復 | P0 | 0.5h |
| ISSUE-003 | 🟡 中 | 待改善 | P1 | 2h |
| ISSUE-004 | 🟡 中 | 待改善 | P1 | 2h |
| ISSUE-005 | 🟢 低 | 待清理 | P2 | 0.5h |
| ISSUE-006 | 🟡 中 | 待改善 | P1 | 1h |
| ISSUE-007 | 🟢 低 | 待改善 | P2 | 2h |
| ISSUE-008 | 🟢 低 | 待擴充 | P3 | 1h |
| ISSUE-009 | 🟢 低 | 待修復 | P2 | 0.5h |
| ISSUE-010 | 🟢 低 | 待修復 | P3 | 0.1h |
| ISSUE-011 | 🟡 中 | 待補充 | P1 | 1h |
| ISSUE-012 | 🟡 中 | 待補充 | P1 | 1h |
| ISSUE-013 | 🟢 低 | 待驗證 | P3 | 1h |
| ISSUE-014 | 🟢 低 | 待改善 | P3 | 0.5h |
| ISSUE-015 | 🟢 低 | 待改善 | P2 | 2h |
| ISSUE-016 | 🟡 中 | 待建立 | P2 | 4h |

**總計預計工時**: 約 19.6 小時

---

## 修復進度

- [ ] ISSUE-001: API Key 硬編碼
- [ ] ISSUE-002: 硬編碼路徑
- [ ] ISSUE-003: 缺少配置管理
- [ ] ISSUE-004: 錯誤處理不足
- [ ] ISSUE-005: 未使用的程式碼
- [ ] ISSUE-006: 暫停機制不完整
- [ ] ISSUE-007: 進度顯示不精確
- [ ] ISSUE-008: 檔案格式支援有限
- [ ] ISSUE-009: 依賴版本不一致
- [ ] ISSUE-010: README 內容重複
- [ ] ISSUE-011: 安裝說明不完整
- [ ] ISSUE-012: 缺少配置說明
- [ ] ISSUE-013: 日文轉換判斷可能不準確
- [ ] ISSUE-014: 輸出檔名可能衝突
- [ ] ISSUE-015: 缺少日誌系統
- [ ] ISSUE-016: 缺少測試

---

## 備註

- 嚴重程度標記：
  - 🔴 高：影響安全性或核心功能
  - 🟡 中：影響使用者體驗或維護性
  - 🟢 低：改善建議或小問題

- 優先級標記：
  - P0: 立即處理（安全性問題）
  - P1: 短期處理（1-2 週內）
  - P2: 中期處理（1 個月內）
  - P3: 長期處理（有時間再處理）

